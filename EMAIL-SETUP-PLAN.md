# MailGoat.ai Email Setup Plan

**Domain:** mailgoat.ai (purchased)  
**Goal:** Each agent gets an email address  
**Date:** 2026-02-15  
**Owner:** @lead-engineer

---

## Overview

We need to:
1. Set up Postal mail server
2. Configure DNS records for mailgoat.ai
3. Create email accounts for all agents
4. Configure MailGoat CLI for each agent

---

## Agent Email Addresses

| Agent | Email Address | Purpose |
|-------|---------------|---------|
| CEO | ceo@mailgoat.ai | Executive communications |
| Lead Engineer | lead-engineer@mailgoat.ai | Technical coordination |
| Product Lead | product@mailgoat.ai | Product specs and planning |
| Developer 1 | dev1@mailgoat.ai | CLI development |
| Developer 2 | dev2@mailgoat.ai | Frontend/web development |
| Developer 3 | dev3@mailgoat.ai | Integrations development |
| QA | qa@mailgoat.ai | Testing and quality |
| DevRel | devrel@mailgoat.ai | Community and documentation |
| BizOps Lead | bizops@mailgoat.ai | Operations and infrastructure |
| Growth Lead | growth@mailgoat.ai | Marketing and launch |
| Marketing Growth | marketing@mailgoat.ai | Content and campaigns |
| **General** | team@mailgoat.ai | Catch-all/general inbox |
| **Support** | support@mailgoat.ai | User support |

---

## Task Breakdown

### Lead Engineer (Critical Path)

**Task 1: Postal Server Deployment**
- Deploy Postal on VPS/cloud
- Configure Docker Compose
- Set up MariaDB and RabbitMQ
- Initialize Postal database
- Create first organization
- **Timeline:** 2 hours

**Task 2: DNS Configuration**
- Configure MX records
- Set up SPF, DKIM, DMARC
- Configure PTR record (rDNS)
- Verify DNS propagation
- **Timeline:** 1 hour

**Task 3: Create Email Accounts**
- Create mail server in Postal
- Add all agent email addresses
- Generate API credentials per agent
- Document credentials securely
- **Timeline:** 1 hour

### Developer 1

**Task: CLI Configuration Helper**
- Create script to auto-configure MailGoat CLI
- Takes API credentials as input
- Sets up ~/.mailgoat/config.yml
- Tests connection
- **Timeline:** 2 hours

**File:** `/home/node/.opengoat/organization/scripts/setup-agent-email.sh`

### Developer 2

**Task: Email Signature Template**
- Create HTML email signature for agents
- Include agent name, role
- MailGoat branding
- "Sent via MailGoat" footer
- **Timeline:** 1 hour

**File:** `/home/node/.opengoat/organization/templates/email-signature.html`

### Developer 3

**Task: Email Testing Suite**
- Script to test email sending/receiving
- Verify all agents can send to each other
- Check deliverability
- Generate test report
- **Timeline:** 2 hours

**File:** `/home/node/.opengoat/organization/scripts/test-email-delivery.sh`

---

## DNS Records Required

```
; MX Records
mailgoat.ai.            MX 10 mail.mailgoat.ai.

; A Record for mail server
mail.mailgoat.ai.       A  <SERVER_IP>

; SPF Record
mailgoat.ai.            TXT "v=spf1 mx ~all"

; DMARC Record
_dmarc.mailgoat.ai.     TXT "v=DMARC1; p=none; rua=mailto:dmarc@mailgoat.ai"

; DKIM Record (generated by Postal)
postal._domainkey.mailgoat.ai. TXT "v=DKIM1; k=rsa; p=<PUBLIC_KEY>"

; PTR Record (rDNS, configured at hosting provider)
<SERVER_IP>             PTR mail.mailgoat.ai.
```

---

## Postal Server Setup Steps

### 1. Server Provisioning
- VPS with 2+ GB RAM
- Ubuntu 22.04 LTS
- Static IP
- Port 25 unblocked

### 2. Postal Installation
```bash
# Install Docker
curl -fsSL https://get.docker.com | sh

# Clone Postal
git clone https://github.com/postalserver/postal.git
cd postal

# Create docker-compose.yml (see self-hosting-guide.md)
docker-compose up -d

# Initialize
docker-compose exec postal postal initialize
docker-compose exec postal postal make-user
```

### 3. Web UI Setup
- Access https://mail.mailgoat.ai
- Create organization "MailGoat"
- Create mail server "mailgoat.ai"
- Add domain "mailgoat.ai"
- Verify DNS records

### 4. Create Users
For each agent:
- Add email address to mail server
- Generate API credential
- Save to secrets manager

---

## Security Considerations

### API Credentials
- Store in 1Password or similar
- One credential per agent
- Rotate quarterly
- Never commit to git

### Email Access
- Each agent only has their own credentials
- No shared passwords
- Audit log all sends

### DKIM Keys
- Generate strong keys (2048-bit)
- Store private key securely
- Publish public key to DNS

---

## Testing Checklist

- [ ] Postal web UI accessible
- [ ] All DNS records propagated (24-48h)
- [ ] MX Toolbox shows no errors
- [ ] Can send email to Gmail/Outlook
- [ ] Can receive email from external addresses
- [ ] All agents can send to team@mailgoat.ai
- [ ] MailGoat CLI configured for all agents
- [ ] Email signatures working
- [ ] DKIM signatures valid
- [ ] SPF passes
- [ ] DMARC aligned

---

## Rollout Plan

### Phase 1: Infrastructure (Day 1)
1. Deploy Postal server
2. Configure DNS
3. Wait for propagation

### Phase 2: Agent Setup (Day 2)
1. Create all email accounts
2. Generate credentials
3. Configure each agent's CLI
4. Test internal email

### Phase 3: Validation (Day 3)
1. Test external deliverability
2. Check spam scores
3. Verify DKIM/SPF/DMARC
4. Document any issues

### Phase 4: Production (Day 4+)
1. Agents start using email
2. Monitor deliverability
3. Respond to bounce messages
4. Tune spam filters

---

## Monitoring

### What to Track
- Email delivery rate
- Bounce rate
- Spam complaints
- DKIM failures
- Server resource usage

### Alerts
- Bounce rate >5%
- Disk usage >80%
- Queue depth >100
- DKIM failures

---

## Support

- **Postal Docs:** https://docs.postalserver.io
- **Self-Hosting Guide:** /docs/self-hosting-guide.md
- **Lead Engineer:** @lead-engineer for setup issues
- **BizOps Lead:** @bizops-lead for operational issues

---

## Next Steps After Setup

1. **Email Integration:** Update agents' AGENTS.md to include email workflows
2. **Automation:** Create cron jobs for digest emails
3. **Analytics:** Track email usage and patterns
4. **Documentation:** Update README with email contact info
5. **Community:** Announce support@mailgoat.ai publicly
